<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>抽奖转盘</title>
    <style>
        .wheel-container {
            width: 300px;
            height: 300px;
            position: relative;
            margin: 50px auto;
        }
        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            border: 2px solid #000;
            overflow: hidden;
        }
        .sector {
            position: absolute;
            width: 50%;
            height: 50%;
            left: 50%;
            top: 0;
            transform-origin: 0% 100%;
            text-align: right;
        }
        .sector::before {
            content: attr(data-text);
            position: absolute;
            right: 60px;
            top: 25%;
            font-size: 18px;
            font-weight: bold;
            transform: rotate(145deg) skewY(145deg);
            transform-origin: left bottom;
        }
        #pointer {
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            background-color: #f00;
            border-radius: 50%;
            z-index: 1;
        }
        button {
            display: block;
            margin: 20px auto;
        }
    </style>
</head>
<body>

<div class="wheel-container">
    <div id="wheel" class="wheel">
        <!-- Sectors will be generated by JavaScript -->
    </div>
    <div id="pointer"></div>
</div>
<button onclick="spinWheel()">旋转</button>

<script>
    let seed=Date.parse(new Date())/100;
    function rand()
    {
        seed^=(seed<<11);
        seed^=(seed>>4);
        seed^=(seed<<5);
        seed^=(seed<<14);
        return (Math.abs(seed)%10000)/10000;
    }
    const wheel = document.getElementById('wheel');
    const numSectors = 10;
    const prizes = ['奖品一', '奖品二', '奖品三', '奖品四', '奖品五', '奖品六', '奖品七', '奖品八','奖品九','奖品十','奖品一', '奖品二', '奖品三', '奖品四', '奖品五', '奖品六', '奖品七', '奖品八','奖品九','奖品十'];
    let spinDone = true;

    for (let i = 0; i < numSectors; i++) {
        const sector = document.createElement('div');
        sector.className = 'sector';
        sector.setAttribute('data-text', prizes[i]);
        sector.style.background = `hsl(${i * 360 / numSectors}, 100%, 75%)`;
        sector.style.transform = `rotate(${i * 360 / numSectors + 180}deg) skewY(${270+360/numSectors}deg)`;
        wheel.appendChild(sector);
    }

    function spinWheel() {
        if(!spinDone)
        {
            return;
        }
        spinDone=false;
        console.log(123);
        const randomSpin = 360 * 9 + Math.round(rand() * 360 * 2);
        wheel.style.transition = 'transform 4s ease-out';
        wheel.style.transform = `rotate(${360 * 12 + Math.round(rand() * 360 * 2)}deg)`;
        setTimeout(() => {
            wheel.style.transition = 'transform 2s ease-in-out';
            wheel.style.transform = `rotate(${360 * 6 + Math.round(rand() * 360 * 2)}deg)`;
        }, 4100);
        setTimeout(() => {
            wheel.style.transition = 'transform 2s ease-in-out';
            wheel.style.transform = `rotate(${randomSpin}deg)`;
        }, 6200);
        setTimeout(() => {
            wheel.style.transition = '';
            wheel.style.transform = `rotate(${randomSpin % 360}deg)`;
            let get=Math.floor((360-randomSpin%360)/(360/numSectors));
            alert('恭喜你获得了'+prizes[get]);
            wheel.style.transition = 'transform 1s ease-out';
            wheel.style.transform = `rotate(${((randomSpin%360)>180)?360:0}deg)`;
            setTimeout(() => {
                spinDone=true;
            }, 1100);
        }, 8300);
    }
</script>

</body>
</html>